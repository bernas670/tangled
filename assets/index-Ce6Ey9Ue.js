(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();const w=document.getElementById("theme-toggle");if(!w)throw new Error("Theme toggle button not found");localStorage.getItem("theme")==="dark"&&document.body.classList.add("dark");function E(){document.body.classList.toggle("dark"),localStorage.setItem("theme",document.body.classList.contains("dark")?"dark":"light")}w.addEventListener("click",E);var u=(e=>(e.Empty="empty",e.Correct="correct",e.Misplaced="misplaced",e.Absent="absent",e))(u||{}),f=(e=>(e.Row="row",e.Col="col",e))(f||{});const p=["MONEL","URINE","RASTA","ATTER","LEERY"].map(e=>e.split("")),h=5,t={mode:f.Row,cursor:{row:0,col:0},grid:Array.from({length:h},()=>Array.from({length:h},()=>({letter:"",state:u.Empty})))},L=document.getElementById("grid"),g=[];for(let e=0;e<5;e++){const c=[];for(let s=0;s<5;s++){const n=document.createElement("div");n.className="cell",L?.appendChild(n),c.push(n)}g.push(c)}function y(){for(let r=0;r<h;r++)for(let o=0;o<h;o++){const l=g[r][o],i=t.grid[r][o];l.className="cell",l.textContent=i.letter??"",l.classList.add(i.state)}const{mode:e,cursor:{row:c,col:s}}=t;(e==="row"?g[c]:g.map(r=>r[s])).forEach(r=>r.classList.add("highlight")),g[c][s].classList.add("cursor")}window.addEventListener("keydown",e=>{if(e.key===" "&&(e.preventDefault(),t.mode=t.mode===f.Row?f.Col:f.Row),e.key==="ArrowUp"&&(t.cursor.row=(t.cursor.row+4)%5),e.key==="ArrowDown"&&(t.cursor.row=(t.cursor.row+1)%5),e.key==="ArrowLeft"&&(t.cursor.col=Math.max(0,t.cursor.col-1)),e.key==="ArrowRight"&&(t.cursor.col=Math.max(0,t.cursor.col+1)),e.key==="Backspace"){const{row:c,col:s}=t.cursor;if(t.grid[c][s].state===u.Correct)return;t.grid[t.cursor.row][t.cursor.col]={letter:"",state:u.Empty},t.mode==="row"?t.cursor.col=Math.max(t.cursor.col-1,0):t.cursor.row=Math.max(t.cursor.row-1,0)}if(/^[a-zA-Z]$/.test(e.key)){const{row:c,col:s}=t.cursor,n=t.grid[c][s];if(n.state===u.Correct)return;n.letter=e.key.toUpperCase(),t.mode===f.Row?t.cursor.col=Math.min(4,t.cursor.col+1):t.cursor.row=Math.min(4,t.cursor.row+1)}e.key==="Enter"&&k(),y()});function b(e,c,s,n){const r=new Map;return e[s].forEach(o=>r.set(o,(r.get(o)??0)+1)),e.forEach((o,l)=>{if(l===s)return;const i=o[n];r.set(i,(r.get(i)??0)+1)}),c[s].forEach(({letter:o,state:l})=>{l===u.Correct&&r.set(o,r.get(o)-1)}),c.forEach((o,l)=>{if(l===s)return;const{letter:i,state:a}=o[n];a===u.Correct&&r.set(i,r.get(i)-1)}),r}function A(e,c,{mode:s,cursor:{row:n,col:r},grid:o}){const l=b(c,o,n,r),i=Array(h).fill(u.Absent);return e.forEach(({letter:a},d)=>{const m=s===f.Row?c[n][d]:c[d][r];a===m&&(i[d]=u.Correct,l.set(a,l.get(a)-1))}),e.forEach(({letter:a},d)=>{if(i[d]!==u.Absent)return;const m=l.get(a)??0;m>0&&(i[d]=u.Misplaced,l.set(a,m-1))}),i}function k(){const{mode:e,grid:c,cursor:{row:s,col:n}}=t,r=e==="row"?c[s]:c.map(a=>a[n]),o=r.map(a=>a.letter);if(o.length!==5){console.error("Word must be 5 letters");return}const l=e==="row"?p[s]:p.map(a=>a[n]).join("");console.log(`Submit ${e}: ${o} / ${l}`);const i=A(r,p,t);console.log(i),i.forEach((a,d)=>{const m=e==="row"?t.grid[s][d]:t.grid[d][n];m.state=a})}y();
