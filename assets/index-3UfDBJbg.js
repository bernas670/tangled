(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))d(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&d(l)}).observe(document,{childList:!0,subtree:!0});function o(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function d(t){if(t.ep)return;t.ep=!0;const s=o(t);fetch(t.href,s)}})();const b=document.getElementById("theme-toggle");if(!b)throw new Error("Theme toggle button not found");localStorage.getItem("theme")==="dark"&&document.body.classList.add("dark");function A(){document.body.classList.toggle("dark"),localStorage.setItem("theme",document.body.classList.contains("dark")?"dark":"light")}b.addEventListener("click",A);var i=(e=>(e.Empty="empty",e.Correct="correct",e.Misplaced="misplaced",e.Absent="absent",e))(i||{}),a=(e=>(e.Row="row",e.Col="col",e))(a||{});const N=["MONEL","URINE","RASTA","ATTER","LEERY"].map(e=>e.split("")),g=5,C=()=>({misplaced:new Set,absent:new Set}),n={mode:a.Row,cursor:{row:0,col:0},grid:Array.from({length:g},()=>Array.from({length:g},()=>({letter:"",state:i.Empty}))),knowledge:{row:Array.from({length:g},C),col:Array.from({length:g},C)}},E=document.getElementById("board"),p=[];for(let e=0;e<5;e++){const r=[];for(let o=0;o<5;o++){const d=document.createElement("div");d.className="cell",d.style.gridRow=String(e+1),d.style.gridColumn=String(o+1),E.appendChild(d),r.push(d)}p.push(r)}const R=Array.from({length:5},()=>{const e=document.createElement("div");e.className="knowledge-row";const r=document.createElement("div");r.className="misplaced-row";const o=document.createElement("div");return o.className="absent-row",e.append(r,o),E.appendChild(e),{root:e,misplacedRow:r,absentRow:o}}),L=Array.from({length:5},()=>{const e=document.createElement("div");e.className="knowledge-col";const r=document.createElement("div");r.className="misplaced-col";const o=document.createElement("div");return o.className="absent-col",e.append(r,o),E.appendChild(e),{root:e,misplacedCol:r,absentCol:o}}),S=e=>{R.forEach(({misplacedRow:r,absentRow:o},d)=>{r.replaceChildren(),o.replaceChildren();const{misplaced:t,absent:s}=e.knowledge.row[d];[...t].sort().forEach(l=>{const c=document.createElement("div");c.className="knowledge-cell misplaced",c.textContent=l,r.appendChild(c)}),[...s].sort().forEach(l=>{const c=document.createElement("div");c.className="knowledge-cell absent",c.textContent=l,o.appendChild(c)})})},x=e=>{L.forEach(({misplacedCol:r,absentCol:o},d)=>{r.replaceChildren(),o.replaceChildren();const{misplaced:t,absent:s}=e.knowledge.col[d];[...t].sort().forEach(l=>{const c=document.createElement("div");c.className="knowledge-cell misplaced",c.textContent=l,r.appendChild(c)}),[...s].sort().forEach(l=>{const c=document.createElement("div");c.className="knowledge-cell absent",c.textContent=l,o.appendChild(c)})})};function v(){for(let t=0;t<g;t++)for(let s=0;s<g;s++){const l=p[t][s],c=n.grid[t][s];l.className="cell",l.textContent=c.letter??"",l.classList.add(c.state)}const{mode:e,cursor:{row:r,col:o}}=n;(e==="row"?p[r]:p.map(t=>t[o])).forEach(t=>t.classList.add("highlight")),p[r][o].classList.add("cursor"),x(n),S(n)}window.addEventListener("keydown",e=>{if(e.key===" "&&(e.preventDefault(),n.mode=n.mode===a.Row?a.Col:a.Row),e.key==="ArrowUp"&&(n.cursor.row=(n.cursor.row+4)%5),e.key==="ArrowDown"&&(n.cursor.row=(n.cursor.row+1)%5),e.key==="ArrowLeft"&&(n.cursor.col=(n.cursor.col+4)%5),e.key==="ArrowRight"&&(n.cursor.col=(n.cursor.col+1)%5),e.key==="Backspace"){const{row:r,col:o}=n.cursor;n.grid[r][o].state!==i.Correct&&(n.grid[n.cursor.row][n.cursor.col]={letter:"",state:i.Empty}),n.mode==="row"?n.cursor.col=Math.max(n.cursor.col-1,0):n.cursor.row=Math.max(n.cursor.row-1,0)}if(/^[a-zA-Z]$/.test(e.key)){const{row:r,col:o}=n.cursor,d=n.grid[r][o];if(d.state===i.Correct)return;d.letter=e.key.toUpperCase(),n.mode===a.Row?n.cursor.col=Math.min(4,n.cursor.col+1):n.cursor.row=Math.min(4,n.cursor.row+1)}e.key==="Enter"&&O(),v()});const I=(e,r,o)=>{const d=r.reduce((s,l)=>l===e?++s:s,0);console.log(r,d);const t=o.reduce((s,l)=>l.letter===e&&l.state===i.Correct?++s:s,0);return console.log(o,t),d-t},M=(e,r,o)=>{if(e.map(c=>c.letter).join("").length<g)return;const{mode:t,cursor:{row:s,col:l}}=o;e.forEach((c,m)=>{const u=t===a.Row?s:m,w=t===a.Row?m:l,f=t===a.Row?r[s][m]:r[m][l];c.letter===f&&(c.state=i.Correct,console.log(c.letter,"is correct")),o.knowledge.col[w].misplaced.delete(c.letter),o.knowledge.row[u].misplaced.delete(c.letter)}),e.forEach((c,m)=>{const u=t===a.Row?s:m,w=t===a.Row?m:l;if(c.state===i.Correct){o.knowledge.col[w].misplaced.delete(c.letter),o.knowledge.row[u].misplaced.delete(c.letter);return}const f=[...r[u],...r.map(h=>h[w])],y=[...o.grid[u],...o.grid.map(h=>h[w])],k=I(c.letter,f,y);console.log(c.letter,k,f,y),k>0?(c.state=i.Misplaced,o.knowledge.col[w].misplaced.add(c.letter),o.knowledge.row[u].misplaced.add(c.letter)):(c.state=i.Absent,o.knowledge.col[w].absent.add(c.letter),o.knowledge.row[u].absent.add(c.letter))})};function O(){const{mode:e,grid:r,cursor:{row:o,col:d}}=n,t=e==="row"?r[o]:r.map(s=>s[d]);M(t,N,n),console.info(n),console.info(n.knowledge.row),console.info(n.knowledge.col)}v();
