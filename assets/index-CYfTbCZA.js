(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))d(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&d(l)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function d(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();const b=document.getElementById("theme-toggle");if(!b)throw new Error("Theme toggle button not found");localStorage.getItem("theme")==="dark"&&document.body.classList.add("dark");function A(){document.body.classList.toggle("dark"),localStorage.setItem("theme",document.body.classList.contains("dark")?"dark":"light")}b.addEventListener("click",A);var a=(e=>(e.Empty="empty",e.Correct="correct",e.MisplacedBoth="misplaced-both",e.MisplacedRow="misplaced-row",e.MisplacedCol="misplaced-col",e.Absent="absent",e))(a||{}),i=(e=>(e.Row="row",e.Col="col",e))(i||{});const h=["MONEL","URINE","RASTA","ATTER","LEERY"].map(e=>e.split("")),g=5,E=()=>({misplaced:new Set,absent:new Set}),r={mode:i.Row,cursor:{row:0,col:0},grid:Array.from({length:g},()=>Array.from({length:g},()=>({letter:"",state:a.Empty}))),knowledge:{row:Array.from({length:g},E),col:Array.from({length:g},E)}},y=document.getElementById("board"),f=[];for(let e=0;e<5;e++){const s=[];for(let t=0;t<5;t++){const d=document.createElement("div");d.className="cell",d.style.gridRow=String(e+1),d.style.gridColumn=String(t+1),y.appendChild(d),s.push(d)}f.push(s)}const L=Array.from({length:5},()=>{const e=document.createElement("div");return e.className="knowledge row",y.appendChild(e),e}),v=Array.from({length:5},()=>{const e=document.createElement("div");return e.className="knowledge col",y.appendChild(e),e}),N=e=>{L.forEach((s,t)=>{s.replaceChildren();const{misplaced:d,absent:o}=e.knowledge.row[t];[...d].sort().forEach(c=>{const l=document.createElement("div");l.className="knowledge-cell misplaced-row",l.textContent=c,s.appendChild(l)}),[...o].sort().forEach(c=>{const l=document.createElement("div");l.className="knowledge-cell absent",l.textContent=c,s.appendChild(l)})})},M=e=>{v.forEach((s,t)=>{s.replaceChildren();const{misplaced:d,absent:o}=e.knowledge.col[t];[...d].sort().forEach(c=>{const l=document.createElement("div");l.className="knowledge-cell misplaced-col",l.textContent=c,s.appendChild(l)}),[...o].sort().forEach(c=>{const l=document.createElement("div");l.className="knowledge-cell absent",l.textContent=c,s.appendChild(l)})})};function C(){for(let o=0;o<g;o++)for(let c=0;c<g;c++){const l=f[o][c],n=r.grid[o][c];l.className="cell",l.textContent=n.letter??"",l.classList.add(n.state)}const{mode:e,cursor:{row:s,col:t}}=r;(e==="row"?f[s]:f.map(o=>o[t])).forEach(o=>o.classList.add("highlight")),f[s][t].classList.add("cursor"),M(r),N(r)}window.addEventListener("keydown",e=>{if(e.key===" "&&(e.preventDefault(),r.mode=r.mode===i.Row?i.Col:i.Row),e.key==="ArrowUp"&&(r.cursor.row=(r.cursor.row+4)%5),e.key==="ArrowDown"&&(r.cursor.row=(r.cursor.row+1)%5),e.key==="ArrowLeft"&&(r.cursor.col=(r.cursor.col+4)%5),e.key==="ArrowRight"&&(r.cursor.col=(r.cursor.col+1)%5),e.key==="Backspace"){const{row:s,col:t}=r.cursor;r.grid[s][t].state!==a.Correct&&(r.grid[r.cursor.row][r.cursor.col]={letter:"",state:a.Empty}),r.mode==="row"?r.cursor.col=Math.max(r.cursor.col-1,0):r.cursor.row=Math.max(r.cursor.row-1,0)}if(/^[a-zA-Z]$/.test(e.key)){const{row:s,col:t}=r.cursor,d=r.grid[s][t];if(d.state===a.Correct)return;d.letter=e.key.toUpperCase(),r.mode===i.Row?r.cursor.col=Math.min(4,r.cursor.col+1):r.cursor.row=Math.min(4,r.cursor.row+1)}e.key==="Enter"&&I(),C()});const x=(e,s,t)=>{if(e.map(n=>n.letter).join("").length<g)return;const{mode:o,cursor:{row:c,col:l}}=t;e.forEach((n,u)=>{const w=o===i.Row?c:u,m=o===i.Row?u:l,p=o===i.Row?s[c][u]:s[u][l];n.letter===p&&(n.state=a.Correct),t.knowledge.col[m].misplaced.delete(n.letter),t.knowledge.row[w].misplaced.delete(n.letter)}),e.forEach((n,u)=>{const w=o===i.Row?c:u,m=o===i.Row?u:l;if(n.state===a.Correct)return;t.knowledge.row[w].misplaced.delete(n.letter),t.knowledge.row[w].absent.delete(n.letter),t.knowledge.col[m].misplaced.delete(n.letter),t.knowledge.col[m].absent.delete(n.letter);const p=h[w].includes(n.letter),k=h.some(R=>R[m]===n.letter);p&&k?(n.state=a.MisplacedBoth,t.knowledge.row[w].misplaced.add(n.letter),t.knowledge.col[m].misplaced.add(n.letter)):p?(n.state=a.MisplacedRow,t.knowledge.row[w].misplaced.add(n.letter),t.knowledge.col[m].absent.add(n.letter)):k?(n.state=a.MisplacedCol,t.knowledge.col[m].misplaced.add(n.letter),t.knowledge.row[w].absent.add(n.letter)):(n.state=a.Absent,t.knowledge.row[w].absent.add(n.letter),t.knowledge.col[m].absent.add(n.letter))})};function I(){const{mode:e,grid:s,cursor:{row:t,col:d}}=r,o=e==="row"?s[t]:s.map(c=>c[d]);x(o,h,r),console.info("state",r)}C();
